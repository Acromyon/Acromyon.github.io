{"version":3,"sources":["common.js"],"names":["_toConsumableArray","arr","Array","isArray","i","arr2","length","from","doc","document","liItm","querySelector","cloneNode","appendChild","allBtns","getElementsByTagName","digits","querySelectorAll","operations","clearBtns","comma","getElementById","backspace","saveData","display","MemoryCurrentValue","MemoryNewValue","MemoryPendingValue","_i","addEventListener","pressDigit","_i2","operation","_i3","clear","decimal","makeBackspace","_i4","makeSaveData","e","digit","target","textContent","value","operate","localOperationMemory","parseFloat","blockedBtns","concat","_i5","setAttribute","testNumber","indexOf","toFixed","slice","str","substr","id","_i6","removeAttribute","localDecimalMemory","slot","closest","console","log","nextElementSibling","classList","add","remove","event","focus","keyEvent","parseInt","String","charCode","keyEventValue","fromCharCode","keyPressSound","sound","Audio","src","soundOn","soundToggle","this","toggle","btns","_i7","btn","play"],"mappings":"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","file":"../common.min.js","sourcesContent":["'use strict';\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nvar doc = document;\n\n//Генерация блока промеж.значений\n\nfor (var i = 0; i < 5; i++) {\n\tvar liItm = doc.querySelector('.notation__list-item').cloneNode(true);\n\tdoc.querySelector('.notation__list').appendChild(liItm);\n}\n\n//Получение объектов в переменных\n\nvar allBtns = document.getElementsByTagName('button');\nvar digits = doc.querySelectorAll('.digit');\nvar operations = doc.querySelectorAll('.operator');\nvar clearBtns = doc.querySelectorAll('.clear-btn');\nvar comma = doc.getElementById('comma');\nvar backspace = doc.getElementById('backspace');\nvar saveData = doc.querySelectorAll('.save-data');\nvar display = doc.getElementById('display');\nvar MemoryCurrentValue = 0;\nvar MemoryNewValue = false;\nvar MemoryPendingValue = '';\n\n//Обработчики событий\n\nfor (var _i = 0; _i < digits.length; _i++) {\n\tdigits[_i].addEventListener('click', pressDigit);\n}\n\nfor (var _i2 = 0; _i2 < operations.length; _i2++) {\n\toperations[_i2].addEventListener('click', operation);\n}\n\nfor (var _i3 = 0; _i3 < clearBtns.length; _i3++) {\n\tclearBtns[_i3].addEventListener('click', clear);\n}\n\ncomma.addEventListener('click', decimal);\n\nbackspace.addEventListener('click', makeBackspace);\n\nfor (var _i4 = 0; _i4 < saveData.length; _i4++) {\n\tsaveData[_i4].addEventListener('click', makeSaveData);\n}\n\n//Ввод с клавиатуры\n\naddEventListener('keypress', function (event) {\n\tdoc.querySelector('.focus-debug').focus();\n\n\tvar keyEvent = parseInt(String(event.charCode));\n\tvar keyEventValue = String.fromCharCode(event.charCode);\n\n\tif (keyEvent > 47 && keyEvent < 58) {\n\t\tpressDigit(keyEventValue);\n\t\tkeyPressSound();\n\t} else if (keyEvent === 0 || keyEvent === 13 || keyEvent === 42 || keyEvent === 43 || keyEvent === 45 || keyEvent === 47 || keyEvent === 61) {\n\t\tif (keyEvent === 13 || keyEvent === 0) {\n\t\t\tkeyEventValue = '=';\n\t\t}\n\t\tif (keyEventValue === '*') {\n\t\t\tkeyEventValue = '×';\n\t\t}\n\t\tif (keyEventValue === '/') {\n\t\t\tkeyEventValue = '÷';\n\t\t}\n\t\toperation(keyEventValue);\n\t\tkeyPressSound();\n\t} else if (keyEvent === 46) {\n\t\tdecimal();\n\t\tkeyPressSound();\n\t}\n});\n\n//Операции\n\nfunction pressDigit(e) {\n\tvar digit = e.target.textContent;\n\n\tif (MemoryNewValue) {\n\t\tdisplay.value = digit;\n\t\tMemoryNewValue = false;\n\t} else if (display.value === '0') {\n\t\tdisplay.value = digit;\n\t} else if (display.value.length < 11) {\n\t\tdisplay.value += digit;\n\t}\n}\n\nfunction operation(e) {\n\tvar operate = e.target.textContent;\n\tvar localOperationMemory = display.value;\n\n\tif (MemoryNewValue && MemoryPendingValue != '=') {\n\t\tdisplay.value = MemoryCurrentValue;\n\t} else {\n\t\tMemoryNewValue = true;\n\t\tif (MemoryPendingValue === '+') {\n\t\t\tMemoryCurrentValue += parseFloat(localOperationMemory);\n\t\t} else if (MemoryPendingValue === '-') {\n\t\t\tMemoryCurrentValue -= parseFloat(localOperationMemory);\n\t\t} else if (MemoryPendingValue === '×') {\n\t\t\tMemoryCurrentValue *= parseFloat(localOperationMemory);\n\t\t} else if (MemoryPendingValue === '÷' && localOperationMemory !== '0') {\n\t\t\tMemoryCurrentValue /= parseFloat(localOperationMemory);\n\t\t} else if (MemoryPendingValue === '÷' && localOperationMemory === '0') {\n\t\t\tMemoryCurrentValue = 'Error';\n\t\t\tvar blockedBtns = [].concat(_toConsumableArray(digits), _toConsumableArray(operations), [comma, backspace], _toConsumableArray(saveData));\n\n\t\t\tfor (var _i5 = 0; _i5 < blockedBtns.length; _i5++) {\n\t\t\t\tblockedBtns[_i5].setAttribute('disabled', 'disabled');\n\t\t\t}\n\t\t} else {\n\t\t\tMemoryCurrentValue = parseFloat(localOperationMemory);\n\t\t}\n\t\tif (operate !== '=') {\n\t\t\tdisplay.value = MemoryCurrentValue + operate;\n\t\t\tMemoryPendingValue = operate;\n\t\t} else {\n\t\t\tdisplay.value = MemoryCurrentValue;\n\t\t\tMemoryPendingValue = operate;\n\t\t}\n\t}\n\n\tvar testNumber = display.value.indexOf('.');\n\n\tif (display.value.length > 11 && testNumber !== -1) {\n\t\tdisplay.value = MemoryCurrentValue.toFixed(10 - MemoryCurrentValue.toFixed().length);\n\t\twhile (display.value.slice(-1) === '0') {\n\t\t\tvar str = display.value;\n\t\t\tdisplay.value = str.substr(0, str.length - 1);\n\t\t}\n\t}\n\tif (display.value.length > 11 && testNumber === -1) {\n\t\tdisplay.value = 'TooMuchBro!';\n\t}\n}\n\nfunction clear(e) {\n\tvar id = e.target.id;\n\n\tfor (var _i6 = 0; _i6 < allBtns.length; _i6++) {\n\t\tallBtns[_i6].removeAttribute('disabled');\n\t}\n\n\tif (id === 'clear-entry') {\n\t\tdisplay.value = '0';\n\t\tMemoryNewValue = true;\n\t} else if (id === 'clear-all' || id === 'clear-creeper') {\n\t\tdisplay.value = '0';\n\t\tMemoryNewValue = true;\n\t\tMemoryCurrentValue = 0;\n\t\tMemoryPendingValue = '';\n\t}\n}\n\nfunction decimal() {\n\tvar localDecimalMemory = display.value;\n\n\tif (MemoryNewValue) {\n\t\tlocalDecimalMemory = '0.';\n\t\tMemoryNewValue = false;\n\t} else if (localDecimalMemory.indexOf('.') === -1) {\n\t\tlocalDecimalMemory += '.';\n\t}\n\tdisplay.value = localDecimalMemory;\n}\n\nfunction makeBackspace() {\n\tvar str = display.value;\n\n\tif (display.value.indexOf('*') === -1 && display.value.indexOf('/') === -1 && display.value.indexOf('+') === -1 && display.value.indexOf('-') === -1 && display.value.indexOf('÷') === -1 && display.value.indexOf('×') === -1) {\n\t\tstr.length > 1 ? display.value = str.substr(0, str.length - 1) : display.value = '0';\n\t}\n}\n\nfunction makeSaveData(e) {\n\tvar slot = e.target.closest('.save-data');\n\tconsole.log(slot);\n\n\tif (slot.nextElementSibling.value === '') {\n\t\tslot.nextElementSibling.value = display.value;\n\t\tslot.classList.add('notation__btn_remove');\n\t} else {\n\t\tslot.nextElementSibling.value = null;\n\t\tslot.classList.remove('notation__btn_remove');\n\t}\n}\n\n// Звук нажатия клавиши и вкл./выкл.\n\nvar sound = new Audio();\nsound.src = 'aud/sound.mp3';\n\nvar soundOn = true;\nvar soundToggle = doc.querySelector('.sound-toggle');\n\nsoundToggle.addEventListener('click', function () {\n\tthis.classList.toggle('sound-toggle_off');\n\tif (soundOn) {\n\t\tsoundOn = false;\n\t} else {\n\t\tsoundOn = true;\n\t}\n});\n\nvar btns = doc.querySelectorAll('button');\nfor (var _i7 = 0; _i7 < btns.length; _i7++) {\n\tvar btn = btns[_i7];\n\tbtn.addEventListener('mousedown', function () {\n\t\tif (soundOn) {\n\t\t\tsound.play();\n\t\t}\n\t}, false);\n}\n\nfunction keyPressSound() {\n\tif (soundOn) {\n\t\tsound.play();\n\t}\n}"]}