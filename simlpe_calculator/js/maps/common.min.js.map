{"version":3,"sources":["common.js"],"names":["_toConsumableArray","arr","Array","isArray","i","arr2","length","from","doc","document","liItm","querySelector","cloneNode","appendChild","digits","querySelectorAll","operations","clearBtns","comma","getElementById","backspace","saveData","display","MemoryCurrentValue","MemoryNewValue","MemoryPendingValue","blockedBtns","concat","_i","addEventListener","e","pressDigit","target","textContent","_i2","operation","_i3","clear","decimal","makeBackspace","_i4","makeSaveData","digit","playSound","value","operate","localOperationMemory","parseFloat","blockBtns","checkLength","type","id","_i5","removeAttribute","indexOf","str","substr","slot","currentTarget","nextElementSibling","classList","add","remove","isDecimal","toFixed","slice","_i6","setAttribute","focus","keyCode","charCode","String","fromCharCode","sound","Audio","src","soundOn","soundToggle","play","toggle"],"mappings":"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","file":"../common.min.js","sourcesContent":["'use strict';\n\nfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\nvar doc = document;\n\n// Генерация блока промеж.значений\n\nfor (var i = 0; i < 5; i++) {\n\tvar liItm = doc.querySelector('.notation__list-item').cloneNode(true);\n\tdoc.querySelector('.notation__list').appendChild(liItm);\n}\n\n// Получение объектов в переменных\n\nvar digits = doc.querySelectorAll('.digit');\nvar operations = doc.querySelectorAll('.operator');\nvar clearBtns = doc.querySelectorAll('.clear-btn');\nvar comma = doc.getElementById('comma');\nvar backspace = doc.getElementById('backspace');\nvar saveData = doc.querySelectorAll('.save-data');\nvar display = doc.getElementById('display');\nvar MemoryCurrentValue = 0;\nvar MemoryNewValue = false;\nvar MemoryPendingValue = '';\nvar blockedBtns = [].concat(_toConsumableArray(digits), _toConsumableArray(operations), [comma, backspace, clearBtns[1]], _toConsumableArray(saveData));\n\n// Обработчики событий\n\nfor (var _i = 0; _i < digits.length; _i++) {\n\tdigits[_i].addEventListener('click', function (e) {\n\t\tpressDigit(e.target.textContent);\n\t});\n}\n\nfor (var _i2 = 0; _i2 < operations.length; _i2++) {\n\toperations[_i2].addEventListener('click', function (e) {\n\t\toperation(e.target.textContent);\n\t});\n}\n\nfor (var _i3 = 0; _i3 < clearBtns.length; _i3++) {\n\tclearBtns[_i3].addEventListener('click', clear);\n}\n\ncomma.addEventListener('click', decimal);\n\nbackspace.addEventListener('click', makeBackspace);\n\nfor (var _i4 = 0; _i4 < saveData.length; _i4++) {\n\tsaveData[_i4].addEventListener('click', makeSaveData);\n}\n\n// Ввод с клавиатуры\n\naddEventListener('keydown', function (e) {\n\tdoc.querySelector('.focus-debug').focus();\n\tvar keyEventValue = void 0;\n\n\tswitch (e.keyCode) {\n\t\tcase 13:\n\t\t\t// \"Enter\"\n\t\t\tkeyEventValue = '=';\n\t\t\toperation(keyEventValue);\n\t\t\tbreak;\n\t\tcase 106:\n\t\t\t// \"*\"\n\t\t\tkeyEventValue = '×';\n\t\t\toperation(keyEventValue);\n\t\t\tbreak;\n\t\tcase 111:\n\t\t\t// \"/\"\n\t\t\tkeyEventValue = '÷';\n\t\t\toperation(keyEventValue);\n\t\t\tbreak;\n\t\tcase 107:\n\t\t\t// \"+\"\n\t\t\tkeyEventValue = '+';\n\t\t\toperation(keyEventValue);\n\t\t\tbreak;\n\t\tcase 109:\n\t\t\t// \"-\"\n\t\t\tkeyEventValue = '-';\n\t\t\toperation(keyEventValue);\n\t\t\tbreak;\n\t\tcase 110:\n\t\t\t// \".\"\n\t\t\tdecimal();\n\t\t\tbreak;\n\t\tcase 8:\n\t\t\t// \"Backspace\"\n\t\t\tmakeBackspace();\n\t\t\tbreak;\n\t\tcase 27:\n\t\t\t// \"Esc\"\n\t\t\tclear(e);\n\t\t\tbreak;\n\t\tdefault:\n\t\t// do nothing\n\t}\n});\n\naddEventListener('keypress', function (e) {\n\tif (e.charCode > 47 && e.charCode < 58) {\n\t\tvar keyEventValue = String.fromCharCode(e.charCode);\n\t\tpressDigit(keyEventValue);\n\t}\n});\n\n// Операции\n\nfunction pressDigit(digit) {\n\tplaySound();\n\n\tif (MemoryNewValue) {\n\t\tdisplay.value = digit;\n\t\tMemoryNewValue = false;\n\t} else if (display.value === '0') {\n\t\tdisplay.value = digit;\n\t} else if (display.value.length < 11) {\n\t\tdisplay.value += digit;\n\t}\n}\n\nfunction operation(operate) {\n\tplaySound();\n\n\tvar localOperationMemory = display.value;\n\n\tif (MemoryNewValue && MemoryPendingValue !== '=') {\n\t\tdisplay.value = MemoryCurrentValue;\n\t} else {\n\t\tMemoryNewValue = true;\n\n\t\tswitch (MemoryPendingValue) {\n\t\t\tcase '+':\n\t\t\t\tMemoryCurrentValue += parseFloat(localOperationMemory);\n\t\t\t\tbreak;\n\t\t\tcase '-':\n\t\t\t\tMemoryCurrentValue -= parseFloat(localOperationMemory);\n\t\t\t\tbreak;\n\t\t\tcase '×':\n\t\t\t\tMemoryCurrentValue *= parseFloat(localOperationMemory);\n\t\t\t\tbreak;\n\t\t\tcase '÷':\n\t\t\t\tif (localOperationMemory === '0') {\n\t\t\t\t\tMemoryCurrentValue = 'Error';\n\t\t\t\t\tblockBtns();\n\t\t\t\t} else {\n\t\t\t\t\tMemoryCurrentValue /= parseFloat(localOperationMemory);\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tMemoryCurrentValue = parseFloat(localOperationMemory);\n\t\t}\n\n\t\tif (operate === '=') {\n\t\t\tdisplay.value = MemoryCurrentValue;\n\t\t\tMemoryPendingValue = operate;\n\t\t} else {\n\t\t\tdisplay.value = MemoryCurrentValue + operate;\n\t\t\tMemoryPendingValue = operate;\n\t\t}\n\t}\n\tcheckLength();\n}\n\nfunction clear(e) {\n\tplaySound();\n\n\tif (e.type === 'click' && e.target.id === 'clear-entry') {\n\t\tdisplay.value = '0';\n\t\tMemoryNewValue = true;\n\t} else {\n\t\tdisplay.value = '0';\n\t\tMemoryNewValue = true;\n\t\tMemoryCurrentValue = 0;\n\t\tMemoryPendingValue = '';\n\t\tfor (var _i5 = 0; _i5 < blockedBtns.length; _i5++) {\n\t\t\tblockedBtns[_i5].removeAttribute('disabled');\n\t\t}\n\t}\n}\n\nfunction decimal() {\n\tplaySound();\n\n\tif (MemoryNewValue) {\n\t\tdisplay.value = '0.';\n\t\tMemoryNewValue = false;\n\t}\n\tif (display.value.indexOf('.') === -1) {\n\t\tdisplay.value += '.';\n\t}\n}\n\nfunction makeBackspace() {\n\tplaySound();\n\n\tvar str = display.value;\n\n\tif (display.value.indexOf('*') === -1 && display.value.indexOf('/') === -1 && display.value.indexOf('+') === -1 && display.value.indexOf('-') === -1 && display.value.indexOf('÷') === -1 && display.value.indexOf('×') === -1 && str.length > 1) {\n\t\tdisplay.value = str.substr(0, str.length - 1);\n\t} else {\n\t\tdisplay.value = '0';\n\t}\n}\n\nfunction makeSaveData(e) {\n\tplaySound();\n\n\tvar slot = e.currentTarget;\n\n\tif (slot.nextElementSibling.value === '') {\n\t\tslot.nextElementSibling.value = display.value;\n\t\tslot.classList.add('notation__btn_remove');\n\t} else {\n\t\tslot.nextElementSibling.value = null;\n\t\tslot.classList.remove('notation__btn_remove');\n\t}\n}\n\n// Проверка на длину\n\nfunction checkLength() {\n\tvar isDecimal = display.value.indexOf('.');\n\n\tif (display.value.length > 11 && isDecimal !== -1) {\n\t\tdisplay.value = MemoryCurrentValue.toFixed(10 - MemoryCurrentValue.toFixed().length);\n\t\twhile (display.value.slice(-1) === '0') {\n\t\t\tvar str = display.value;\n\t\t\tdisplay.value = str.substr(0, str.length - 1);\n\t\t}\n\t}\n\tif (display.value.length > 11 && isDecimal === -1) {\n\t\tdisplay.value = 'TooMuchBro!';\n\t\tblockBtns();\n\t}\n}\n\n// Заморозить кнопки\n\nfunction blockBtns() {\n\tfor (var _i6 = 0; _i6 < blockedBtns.length; _i6++) {\n\t\tblockedBtns[_i6].setAttribute('disabled', 'disabled');\n\t}\n}\n\n// Звук нажатия клавиши и вкл./выкл.\n\nvar sound = new Audio();\nsound.src = 'aud/sound.mp3';\n\nvar soundOn = true;\nvar soundToggle = doc.querySelector('.sound-toggle');\n\nsoundToggle.addEventListener('click', function (e) {\n\te.target.classList.toggle('sound-toggle_off');\n\tif (soundOn) {\n\t\tsoundOn = false;\n\t} else {\n\t\tsoundOn = true;\n\t}\n});\n\nfunction playSound() {\n\tif (soundOn) {\n\t\tsound.play();\n\t}\n}"]}